<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Gallery</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .media-item {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            padding: 10px;
            text-align: center;
        }
        .media-item img, .media-item video {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
        }
        .error {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Media Gallery</h1>
    <div class="gallery" id="gallery">
        <!-- Media items will be inserted here -->
    </div>

    <script>
        const API_BASE_URL = 'https://<your-vercel-app>.vercel.app'; // Replace with your Vercel app URL
        const mediaIndices = [1, 2, 3, 4, 5, 6];

        async function loadMedia() {
            const gallery = document.getElementById('gallery');

            for (const index of mediaIndices) {
                try {
                    const response = await fetch(`${API_BASE_URL}/api/media${index}`, {
                        headers: {
                            'Origin': 'https://cloud-smp.mcboss.top' // Match your API's allowed origin
                        }
                    });

                    if (!response.ok) {
                        throw new Error(`Failed to fetch media ${index}: ${response.statusText}`);
                    }

                    const contentType = response.headers.get('content-type');
                    const blob = await response.blob();
                    const url = URL.createObjectURL(blob);

                    const mediaItem = document.createElement('div');
                    mediaItem.className = 'media-item';

                    if (contentType.startsWith('image/')) {
                        const img = document.createElement('img');
                        img.src = url;
                        img.alt = `Media ${index}`;
                        mediaItem.appendChild(img);
                    } else if (contentType.startsWith('video/')) {
                        const video = document.createElement('video');
                        video.src = url;
                        video.controls = true;
                        video.alt = `Media ${index}`;
                        mediaItem.appendChild(video);
                    } else {
                        throw new Error(`Unsupported content type for media ${index}: ${contentType}`);
                    }

                    gallery.appendChild(mediaItem);
                } catch (error) {
                    console.error(error);
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'media-item error';
                    errorDiv.textContent = `Error loading media ${index}: ${error.message}`;
                    gallery.appendChild(errorDiv);
                }
            }
        }

        // Load media when the page loads
        window.onload = loadMedia;
    </script>
</body>
</html>